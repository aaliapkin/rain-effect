{"version":3,"sources":["webpack://rain-effect/./src/js/script.js","webpack://rain-effect/./src/shaders/rain.frag","webpack://rain-effect/./src/shaders/rain.vert","webpack://rain-effect/webpack/bootstrap","webpack://rain-effect/webpack/runtime/compat get default export","webpack://rain-effect/webpack/runtime/define property getters","webpack://rain-effect/webpack/runtime/hasOwnProperty shorthand","webpack://rain-effect/webpack/runtime/make namespace object","webpack://rain-effect/./src/js/main.js"],"names":["mouse","x","undefined","y","dir","moveListener","e","outListener","clickListener","window","addEventListener","this","point","distance","Infinity","dist","origin","target","mapclamp","in_start","in_end","out_start","out_end","d1","d2","Math","sqrt","init","Animation","cnv","ctx","size","w","h","cx","cy","lastFrameTime","currentFrameTime","fps","fpsHistory","zoom_center","target_zoom_center","zoom_size","stop_zooming","zoom_factor","max_iterations","proj","xmin","xmax","ymin","ymax","zoom","zoomInterval","interval","psize","startTime","time","texture","uvmouse","lastmousepos","mouseintensity","u_MVP","u_lBounds","u_time","u_Size","u_Sampler","u_Mouse","u_MouseInt","u_asp","onmousedown","preventDefault","button","setInterval","onZooming","factor","step","max","offsetx","offsety","clearZoom","clearInterval","oncontextmenu","createCanvas","updateAnimation","document","createElement","body","appendChild","id","gl","getContext","vertShader","createShader","VERTEX_SHADER","fragShader","FRAGMENT_SHADER","vertSrc","shaderSource","vertexShaderSource","fragSrc","fragmentShaderSource","compileShader","getShaderParameter","COMPILE_STATUS","alert","console","log","getShaderInfoLog","program","createProgram","attachShader","linkProgram","validateProgram","getProgramParameter","VALIDATE_STATUS","useProgram","vertexBuffer","createBuffer","bindBuffer","ARRAY_BUFFER","bufferData","Float32Array","STATIC_DRAW","indexBuffer","ELEMENT_ARRAY_BUFFER","Uint16Array","position_attrib_location","getAttribLocation","enableVertexAttribArray","vertexAttribPointer","FLOAT","getUniformLocation","setCanvasSize","Date","now","url","createTexture","bindTexture","TEXTURE_2D","internalFormat","RGBA","srcFormat","srcType","UNSIGNED_BYTE","pixel","Uint8Array","texImage2D","image","Image","onload","generateMipmap","texParameteri","TEXTURE_MIN_FILTER","LINEAR_MIPMAP_LINEAR","src","loadTexture","activeTexture","TEXTURE0","getProgramInfoLog","width","innerWidth","height","innerHeight","viewport","isFinite","dx","dy","d","floor","calculateMVP","uniformMatrix4fv","uniform4f","uniform1f","getMouse","uniform2f","uniform1i","clearColor","clear","COLOR_BUFFER_BIT","drawElements","TRIANGLES","UNSIGNED_SHORT","push","length","avg","reduce","a","b","updateCanvas","calculateFps","requestAnimationFrame","module","exports","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","n","getter","__esModule","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","r","Symbol","toStringTag","value","require"],"mappings":"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","file":"bundle.js","sourcesContent":["\"use strict\";\r\n\r\nimport vertexShaderSource from \"shaders/rain.vert\";\r\nimport fragmentShaderSource from \"shaders/rain.frag\";\r\n\r\nconst config = {\r\n  shut: true,\r\n};\r\n\r\nfunction hexToRgb(hex) {\r\n  var bigint = parseInt(hex, 16);\r\n  var r = (bigint >> 16) & 255;\r\n  var g = (bigint >> 8) & 255;\r\n  var b = bigint & 255;\r\n\r\n  return r + \",\" + g + \",\" + b;\r\n}\r\n\r\nclass Mouse {\r\n  x = undefined;\r\n  y = undefined;\r\n  dir = true;\r\n\r\n  moveListener = (e) => {\r\n    this.x = e.x;\r\n    this.y = e.y;\r\n  };\r\n\r\n  outListener = (e) => {\r\n    mouse.x = undefined;\r\n    mouse.y = undefined;\r\n  };\r\n\r\n  clickListener = (e) => {\r\n    this.dir = !this.dir;\r\n  };\r\n\r\n  init() {\r\n    window.addEventListener(\"mousemove\", this.moveListener);\r\n    window.addEventListener(\"mouseout\", this.outListener);\r\n    window.addEventListener(\"click\", this.clickListener);\r\n  }\r\n\r\n  getDist(point) {\r\n    if (mouse.x !== undefined) {\r\n      let mousedist = distance(point, this);\r\n      return mousedist;\r\n    }\r\n    return Infinity;\r\n  }\r\n\r\n  getVectorTo(point) {\r\n    return getVectorTo(point, this);\r\n  }\r\n}\r\n\r\nconst mouse = new Mouse();\r\nmouse.init();\r\n\r\nfunction mapclamp(x, in_start, in_end, out_start, out_end) {\r\n  x = x === undefined ? in_end : x;\r\n  x = x > in_end ? in_end : x;\r\n  x = x < in_start ? in_start : x;\r\n  let out =\r\n    out_start + ((out_end - out_start) / (in_end - in_start)) * (x - in_start);\r\n  return out;\r\n}\r\n\r\nfunction distance(d1, d2 = { x: 0, y: 0 }) {\r\n  return Math.sqrt((d2.x - d1.x) ** 2 + (d2.y - d1.y) ** 2);\r\n}\r\n\r\nfunction getVectorTo(origin, target) {\r\n  const dist = distance(origin, target);\r\n  if (dist === 0) {\r\n    return { x: 0, y: 0 };\r\n  }\r\n  return {\r\n    x: (target.x - origin.x) / dist,\r\n    y: (target.y - origin.y) / dist,\r\n  };\r\n}\r\n\r\nfunction mapArrValue(arr, val, max) {\r\n  let interval = max / (arr.length - 1);\r\n  let i = Math.floor(val / interval);\r\n  let w = (val % interval) / interval;\r\n  let smoothstep = 3 * w ** 2 - 2 * w ** 3;\r\n  let ret = arr[i] * (1 - smoothstep) + arr[i + 1] * smoothstep;\r\n  if (ret === NaN) {\r\n    debugger;\r\n  }\r\n  return ret;\r\n}\r\n\r\n//\r\n// Initialize a texture and load an image.\r\n// When the image finished loading copy it into the texture.\r\n//\r\nfunction loadTexture(gl, url) {\r\n  const texture = gl.createTexture();\r\n  gl.bindTexture(gl.TEXTURE_2D, texture);\r\n\r\n  // Because images have to be downloaded over the internet\r\n  // they might take a moment until they are ready.\r\n  // Until then put a single pixel in the texture so we can\r\n  // use it immediately. When the image has finished downloading\r\n  // we'll update the texture with the contents of the image.\r\n  const level = 0;\r\n  const internalFormat = gl.RGBA;\r\n  const width = 1;\r\n  const height = 1;\r\n  const border = 0;\r\n  const srcFormat = gl.RGBA;\r\n  const srcType = gl.UNSIGNED_BYTE;\r\n  const pixel = new Uint8Array([0, 0, 255, 255]); // opaque blue\r\n  gl.texImage2D(\r\n    gl.TEXTURE_2D,\r\n    level,\r\n    internalFormat,\r\n    width,\r\n    height,\r\n    border,\r\n    srcFormat,\r\n    srcType,\r\n    pixel\r\n  );\r\n\r\n  const image = new Image();\r\n  image.onload = function () {\r\n    gl.bindTexture(gl.TEXTURE_2D, texture);\r\n    gl.texImage2D(\r\n      gl.TEXTURE_2D,\r\n      level,\r\n      internalFormat,\r\n      srcFormat,\r\n      srcType,\r\n      image\r\n    );\r\n\r\n    gl.generateMipmap(gl.TEXTURE_2D);\r\n    gl.texParameteri(\r\n      gl.TEXTURE_2D,\r\n      gl.TEXTURE_MIN_FILTER,\r\n      gl.LINEAR_MIPMAP_LINEAR\r\n    );\r\n\r\n    // WebGL1 has different requirements for power of 2 images\r\n    // vs non power of 2 images so check if the image is a\r\n    // power of 2 in both dimensions.\r\n    // if (isPowerOf2(image.width) && isPowerOf2(image.height)) {\r\n    //   // Yes, it's a power of 2. Generate mips.\r\n    //   gl.generateMipmap(gl.TEXTURE_2D);\r\n    // } else {\r\n    //   // No, it's not a power of 2. Turn off mips and set\r\n    //   // wrapping to clamp to edge\r\n    //   gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\r\n    //   gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\r\n    //   gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\r\n    //   gl.generateMipmap(gl.TEXTURE_2D);\r\n    // }\r\n  };\r\n  image.src = url;\r\n\r\n  return texture;\r\n}\r\n\r\nfunction isPowerOf2(value) {\r\n  return (value & (value - 1)) == 0;\r\n}\r\n\r\nclass Animation {\r\n  cnv = null;\r\n  ctx = null;\r\n  size = { w: 0, h: 0, cx: 0, cy: 0 };\r\n\r\n  lastFrameTime = 0;\r\n  currentFrameTime = 0;\r\n  fps = 60;\r\n  fpsHistory = [];\r\n\r\n  zoom_center = [0.0, 0.0];\r\n  target_zoom_center = [0.0, 0.0];\r\n  zoom_size = 4.0;\r\n  stop_zooming = true;\r\n  zoom_factor = 1.0;\r\n  max_iterations = 500;\r\n\r\n  proj = [\r\n    1.0,\r\n    0.0,\r\n    0.0,\r\n    0.0,\r\n    0.0,\r\n    1.0,\r\n    0.0,\r\n    0.0,\r\n    0.0,\r\n    0.0,\r\n    1.0,\r\n    0.0,\r\n    0.0,\r\n    0.0,\r\n    0.0,\r\n    1.0,\r\n  ];\r\n\r\n  xmin = -2.0;\r\n  xmax = 1.0;\r\n  ymin = -1.5;\r\n  ymax = 1.5;\r\n\r\n  zoom = true;\r\n  zoomInterval = undefined;\r\n  interval = 50;\r\n  psize = 5.0;\r\n  startTime = 0.0;\r\n  time = 0.0;\r\n  texture = null;\r\n\r\n  uvmouse = {\r\n    x: 0.0,\r\n    y: 0.0,\r\n  };\r\n  lastmousepos = {\r\n    x: 0.0,\r\n    y: 0.0,\r\n  };\r\n  mouseintensity = 0.0;\r\n\r\n  // Uniforms\r\n\r\n  u_MVP = null;\r\n  u_lBounds = null;\r\n  u_time = null;\r\n  u_Size = null;\r\n  u_Sampler = null;\r\n  u_Mouse = null;\r\n  u_MouseInt = null;\r\n  u_asp = null;\r\n\r\n  init() {\r\n    this.createCanvas();\r\n    this.updateAnimation();\r\n  }\r\n\r\n  calculateMVP() {\r\n    let left, right, top, bottom, far, near;\r\n    const ratio = this.size.w / this.size.h;\r\n\r\n    left = 0;\r\n    right = 1;\r\n\r\n    bottom = 1;\r\n    top = 0;\r\n\r\n    near = 0.0;\r\n    far = 1.0;\r\n\r\n    // prettier-ignore\r\n    this.proj = [ \r\n      2 / (right - left),                   0,                 0,  -(right + left) / (right - left),\r\n                       0,  2 / (top - bottom),                 0,  -(top + bottom) / (top - bottom),\r\n                       0,                   0,  2 / (far - near),      -(far + near) / (far - near),\r\n                       0,                   0,                 0,                                 1,\r\n    ];\r\n  }\r\n\r\n  createCanvas() {\r\n    this.cnv = document.createElement(`canvas`);\r\n    document.body.appendChild(this.cnv);\r\n    this.cnv.id = \"canvas\";\r\n\r\n    const gl = (this.ctx = this.cnv.getContext(\"webgl2\"));\r\n\r\n    const vertShader = gl.createShader(gl.VERTEX_SHADER);\r\n    const fragShader = gl.createShader(gl.FRAGMENT_SHADER);\r\n\r\n    const vertSrc = gl.shaderSource(vertShader, vertexShaderSource);\r\n    const fragSrc = gl.shaderSource(fragShader, fragmentShaderSource);\r\n\r\n    gl.compileShader(vertShader, vertSrc);\r\n    if (!gl.getShaderParameter(vertShader, gl.COMPILE_STATUS)) {\r\n      alert(\"Error compiling vertex shader\");\r\n      console.log(gl.getShaderInfoLog(vertShader));\r\n    }\r\n\r\n    gl.compileShader(fragShader, fragSrc);\r\n    if (!gl.getShaderParameter(fragShader, gl.COMPILE_STATUS)) {\r\n      alert(\"Error compiling fragment shader\");\r\n      console.log(gl.getShaderInfoLog(fragShader));\r\n    }\r\n\r\n    const program = gl.createProgram();\r\n    gl.attachShader(program, vertShader);\r\n    gl.attachShader(program, fragShader);\r\n    gl.linkProgram(program);\r\n\r\n    gl.validateProgram(program);\r\n    if (!gl.getProgramParameter(program, gl.VALIDATE_STATUS)) {\r\n      console.log(\"Error validating program \", gl.getProgramInfoLog(program));\r\n      return;\r\n    }\r\n\r\n    gl.useProgram(program);\r\n\r\n    const vertexBuffer = gl.createBuffer();\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\r\n\r\n    // prettier-ignore\r\n    const positions = [\r\n      -1.0, -1.0, \r\n       1.0, -1.0, \r\n       1.0,  1.0, \r\n      -1.0,  1.0\r\n    ];\r\n    gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(positions), gl.STATIC_DRAW);\r\n\r\n    const indexBuffer = gl.createBuffer();\r\n    gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer);\r\n\r\n    // prettier-ignore\r\n    const indices = [\r\n      0, 1, 2, \r\n      2, 3, 0\r\n    ];\r\n\r\n    gl.bufferData(\r\n      gl.ELEMENT_ARRAY_BUFFER,\r\n      new Uint16Array(indices),\r\n      gl.STATIC_DRAW\r\n    );\r\n\r\n    const position_attrib_location = gl.getAttribLocation(program, \"aPos\");\r\n    gl.enableVertexAttribArray(position_attrib_location);\r\n    gl.vertexAttribPointer(position_attrib_location, 2, gl.FLOAT, false, 0, 0);\r\n\r\n    this.u_MVP = gl.getUniformLocation(program, \"u_MVP\");\r\n    this.u_lBounds = gl.getUniformLocation(program, \"u_bounds\");\r\n    this.u_time = gl.getUniformLocation(program, \"u_time\");\r\n    this.u_Size = gl.getUniformLocation(program, \"u_Size\");\r\n    this.u_Sampler = gl.getUniformLocation(program, \"u_Sampler\");\r\n    this.u_Mouse = gl.getUniformLocation(program, \"u_Mouse\");\r\n    this.u_MouseInt = gl.getUniformLocation(program, \"u_MouseInt\");\r\n    this.u_asp = gl.getUniformLocation(program, \"u_asp\");\r\n\r\n    this.setCanvasSize();\r\n    window.addEventListener(`resize`, () => {\r\n      this.setCanvasSize();\r\n    });\r\n\r\n    this.startTime = Date.now();\r\n\r\n    //this.cnv.addEventListener(\"mousedown\", this.onmousedown);\r\n    //this.cnv.addEventListener(\"contextmenu\", this.onmousedown);\r\n    //this.cnv.addEventListener(\"mouseup\", this.clearZoom);\r\n    //this.cnv.addEventListener(\"mouseleave\", this.clearZoom);\r\n    //this.cnv.addEventListener(\"mouseout\", this.clearZoom);\r\n\r\n    this.texture = loadTexture(gl, \"img/bg1.jpg\");\r\n    gl.activeTexture(gl.TEXTURE0);\r\n    gl.bindTexture(gl.TEXTURE_2D, this.texture);\r\n  }\r\n\r\n  setCanvasSize() {\r\n    this.size.w = this.cnv.width = window.innerWidth;\r\n    this.size.h = this.cnv.height = window.innerHeight;\r\n    this.size.cx = this.size.w / 2;\r\n    this.size.cy = this.size.h / 2;\r\n    this.ctx.viewport(0, 0, this.size.w, this.size.h);\r\n  }\r\n\r\n  getMouse() {\r\n    let x = mouse.x;\r\n    let y = mouse.y;\r\n\r\n    // console.log(this.mouseintensity);\r\n\r\n    if (isFinite(x) && isFinite(y)) {\r\n      this.uvmouse = {\r\n        x: mapclamp(x, 0, this.size.w, 0, 1),\r\n        y: mapclamp(y, 0, this.size.h, 0, 1),\r\n      };\r\n\r\n      const dx = x - this.lastmousepos.x;\r\n      const dy = y - this.lastmousepos.y;\r\n      const d = dx * dx + dy * dy;\r\n\r\n      this.lastmousepos = {\r\n        ...{ x, y },\r\n      };\r\n\r\n      if (d > 0) {\r\n        console.log(Math.floor(d));\r\n        this.mouseintensity -= mapclamp(d, 0, 2000, 0.0, 0.1);\r\n        this.mouseintensity = this.mouseintensity < 0 ? 0 : this.mouseintensity;\r\n        return;\r\n      }\r\n    }\r\n    this.mouseintensity += 0.01;\r\n    this.mouseintensity = this.mouseintensity > 1 ? 1 : this.mouseintensity;\r\n  }\r\n\r\n  updateCanvas() {\r\n    const gl = this.ctx;\r\n\r\n    this.time = (Date.now() - this.startTime) / 1000.0;\r\n\r\n    this.calculateMVP();\r\n\r\n    gl.uniformMatrix4fv(this.u_MVP, false, this.proj);\r\n    gl.uniform4f(this.u_lBounds, this.xmin, this.xmax, this.ymin, this.ymax);\r\n    gl.uniform1f(this.u_time, this.time);\r\n    gl.uniform1f(this.u_Size, this.psize);\r\n\r\n    this.getMouse();\r\n    gl.uniform2f(this.u_Mouse, this.uvmouse.x, this.uvmouse.y);\r\n    gl.uniform1f(this.u_MouseInt, this.mouseintensity);\r\n\r\n    gl.uniform1f(this.u_asp, this.size.w / this.size.h);\r\n    gl.uniform1i(this.u_Sampler, 0);\r\n\r\n    gl.clearColor(0.0, 0.0, 0.0, 1.0);\r\n    gl.clear(gl.COLOR_BUFFER_BIT);\r\n    gl.drawElements(gl.TRIANGLES, 6, gl.UNSIGNED_SHORT, 0);\r\n  }\r\n\r\n  onmousedown = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (e.button === 0) {\r\n      this.zoom = true;\r\n    }\r\n\r\n    if (e.button === 2) {\r\n      this.zoom = false;\r\n    }\r\n\r\n    if (!this.zoomInterval) {\r\n      this.zoomInterval = setInterval(this.onZooming, this.interval);\r\n    }\r\n  };\r\n\r\n  onZooming = () => {\r\n    let factor = 1;\r\n    let step = Math.max(this.currentFrameTime, this.interval) / 1000.0;\r\n\r\n    if (this.zoom === true) {\r\n      factor -= step;\r\n    }\r\n\r\n    if (this.zoom === false) {\r\n      factor += step;\r\n    }\r\n\r\n    let xpos = mapclamp(mouse.x, 0, this.size.w, this.xmin, this.xmax);\r\n    let ypos = mapclamp(mouse.y, 0, this.size.h, this.ymax, this.ymin);\r\n\r\n    let offsetx = xpos * (1 - factor);\r\n    let offsety = ypos * (1 - factor);\r\n\r\n    this.xmin = offsetx + this.xmin * factor;\r\n    this.xmax = offsetx + this.xmax * factor;\r\n    this.ymin = offsety + this.ymin * factor;\r\n    this.ymax = offsety + this.ymax * factor;\r\n  };\r\n\r\n  clearZoom = (e) => {\r\n    clearInterval(this.zoomInterval);\r\n    this.zoomInterval = undefined;\r\n  };\r\n\r\n  oncontextmenu = (e) => {\r\n    e.preventDefault();\r\n  };\r\n\r\n  calculateFps() {\r\n    if (this.lastFrameTime == 0) {\r\n      this.lastFrameTime = this.time;\r\n    } else {\r\n      this.currentFrameTime = this.time - this.lastFrameTime;\r\n      this.fpsHistory.push(1 / this.currentFrameTime);\r\n      this.lastFrameTime = this.time;\r\n      if (this.fpsHistory.length > 20) {\r\n        const sum = this.fpsHistory.reduce((a, b) => a + b, 0);\r\n        const avg = sum / this.fpsHistory.length || 0;\r\n        this.fps = avg;\r\n        this.fpsHistory = [];\r\n        if (config.shut !== true) {\r\n          console.log(\"Animation fps \", Math.round(this.fps, 0));\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  updateAnimation() {\r\n    this.updateCanvas();\r\n    this.calculateFps();\r\n    window.requestAnimationFrame(() => {\r\n      this.updateAnimation();\r\n    });\r\n  }\r\n}\r\n\r\nwindow.onload = () => {\r\n  new Animation().init();\r\n};\r\n","module.exports = \"#version 300 es\\r\\n\\r\\nprecision highp float;\\r\\n#define MAX_ITERATIONS 255.0\\r\\n#define S(a, b, t) smoothstep(a, b, t)\\r\\n\\r\\nout vec4 FragColor;\\r\\nin vec2 uv;\\r\\nin vec2 mouse;\\r\\n\\r\\nuniform vec4 u_bounds;\\r\\nuniform float u_time;\\r\\nuniform float u_Size;\\r\\nuniform sampler2D u_Sampler;\\r\\nuniform float u_MouseInt;\\r\\nuniform float u_asp;\\r\\n\\r\\nfloat map(float value, float min1, float max1, float min2, float max2) {\\r\\n    return min2 + (value - min1) * (max2 - min2) / (max1 - min1);\\r\\n}\\r\\n\\r\\nfloat N21(vec2 p) {\\r\\n  p = fract(p * vec2(123.34f, 345.45f));      \\r\\n  p += dot(p, p + 34.345f);\\r\\n  return fract(p.x * p.y);      \\r\\n}\\r\\n\\r\\nvec3 Layer(vec2 UV, float t) {\\r\\n  \\r\\n  vec2 asp = vec2(2.0f, 1.0f); // y: 2, x: 1\\r\\n  vec2 uv1 = UV * u_Size * asp * vec2(u_asp, 1.0f);\\r\\n  uv1.y = -uv1.y;\\r\\n  uv1.y += t * .25f;\\r\\n  vec2 gv = fract(uv1) - .5f;\\r\\n  vec2 id = floor(uv1);\\r\\n\\r\\n  float n = N21(id);\\r\\n  t += n * 6.2831;\\r\\n  \\r\\n  float w = UV.y * 10.0f;\\r\\n  float x = (n - 0.5f) * .8f;\\r\\n  x += (.4f - abs(x)) * sin(3.0f * w) * pow(sin(w), 6.0f) * .45f;\\r\\n\\r\\n  float y = -sin(t + sin(t + sin(t) * .5f)) * .45f;\\r\\n  y -= (gv.x - x) * (gv.x - x);\\r\\n\\r\\n  vec2 dropPos = (gv - vec2(x, y)) / asp;\\r\\n  float drop = S(.035f, .025f, length(dropPos));\\r\\n\\r\\n  vec2 trailPos = (gv - vec2(x, t * .25f)) / asp;\\r\\n  trailPos.y = (fract(trailPos.y * 32.0f) - 0.5f) / 32.0f;\\r\\n  float trail = S(.03f, .001f, length(trailPos)) * .8f;\\r\\n  float fogTrail = S(-.1f, .1f, dropPos.y);\\r\\n  fogTrail *= S(.5f, y, gv.y);\\r\\n  trail *= fogTrail;\\r\\n  fogTrail *= S(0.03f, 0.02f, abs(dropPos.x));\\r\\n\\r\\n  vec2 offs = drop * dropPos * .6 + trail * trailPos * .4;\\r\\n\\r\\n  return vec3(offs, fogTrail);\\r\\n\\r\\n  // return vec3(trail, offs.y, fogTrail);\\r\\n}\\r\\n\\r\\nvoid main()\\r\\n{\\r\\n  float Pi = 6.28318530718;\\r\\n  vec2 asp = vec2(u_asp, 1.0f);\\r\\n\\r\\n  float imgasp = u_asp / 1.4f; // image aspect ratio\\r\\n  vec2 sampleuv;\\r\\n  if (imgasp > 1.0f) { \\r\\n    sampleuv = (uv - vec2(0.5f)) * vec2(1.0f, 1.0f / imgasp) + vec2(0.5f);\\r\\n  } else {\\r\\n    sampleuv = (uv - vec2(0.5f)) * vec2(imgasp, 1.0f) + vec2(0.5f);\\r\\n  }\\r\\n\\r\\n  vec2 uv1 = uv * asp;\\r\\n\\r\\n  FragColor = vec4(0.0f);\\r\\n  // cycle time to avoid precision drop\\r\\n  float t = mod(u_time, 72000.0f);\\r\\n\\r\\n  vec3 drops = Layer(uv1, t);\\r\\n  drops += Layer(uv1 * 1.73f + 1.75f, t + 1.87);\\r\\n  drops += Layer(uv1 * 1.13f + 7.03f, t + 3.31);\\r\\n\\r\\n  float blur = (1.0f - drops.z);\\r\\n  \\r\\n  float Directions = 8.0;\\r\\n  float Quality = 4.0; \\r\\n  float Size = 2.0;\\r\\n  vec2 Radius = vec2(.02f);\\r\\n\\r\\n  vec2 uvoff = sampleuv + drops.xy;\\r\\n  vec4 Color = texture(u_Sampler, sampleuv, 4.0f);\\r\\n\\r\\n  for(float d = 0.0; d < Pi; d += Pi/Directions) {\\r\\n    for(float i = 1.0 / Quality; i <= 1.0; i += 1.0 / Quality) {\\r\\n      Color += texture(u_Sampler, sampleuv + vec2(cos(d), sin(d)) * Radius * i, 4.0f);\\t\\t\\r\\n    }\\r\\n  }\\r\\n\\r\\n  float mouseCircle = S(0.3f, 0.1f, length((mouse - uv) * asp)) * u_MouseInt;\\r\\n  blur *= (1.0f - mouseCircle);\\r\\n\\r\\n  Color /= Quality * Directions;\\r\\n  vec4 BaseColor = texture(u_Sampler, uvoff);\\r\\n  FragColor = mix(BaseColor, Color, blur) * 0.7f;\\r\\n\\r\\n  // vec4 Color = texture(u_Sampler, sampleuv);\\r\\n  // FragColor = Color;\\r\\n  // FragColor = vec4(1.0f) * mouseCircle;\\r\\n  // FragColor = vec4(sampleuv, 0.0f, 1.0f);\\r\\n}\"","module.exports = \"#version 300 es\\r\\n\\r\\nprecision highp float;\\r\\nlayout(location = 0) in vec2 aPos;\\r\\n\\r\\nout vec2 uv;\\r\\nout vec2 mouse;\\r\\n\\r\\nuniform mat4 u_MVP;\\r\\nuniform vec2 u_Mouse;\\r\\n\\r\\nvoid main() {\\r\\n  gl_Position = vec4(aPos, .0f, 1.0f);\\r\\n  vec4 uv_out =  gl_Position * inverse(u_MVP);\\r\\n  uv = uv_out.xy;\\r\\n  // mouse = (inverse(u_MVP) * vec4(u_Mouse, .0f, 1.0f)).xy;\\r\\n  mouse = u_Mouse.xy;\\r\\n}\"","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","require('css/styles.scss');\r\nrequire('js/script.js');\r\n"],"sourceRoot":""}