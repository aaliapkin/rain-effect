(()=>{var t={187:(t,e,r)=>{"use strict";r.r(e);var i=r(676),n=r.n(i),o=r(335),s=r.n(o);function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,i)}return r}function u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function l(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function c(t,e,r){return e&&l(t.prototype,e),r&&l(t,r),t}var m=new(function(){function t(){var e=this;f(this,t),this.x=void 0,this.y=void 0,this.dir=!0,this.moveListener=function(t){e.x=t.x,e.y=t.y},this.outListener=function(t){m.x=void 0,m.y=void 0},this.clickListener=function(t){e.dir=!e.dir}}return c(t,[{key:"init",value:function(){window.addEventListener("mousemove",this.moveListener),window.addEventListener("mouseout",this.outListener),window.addEventListener("click",this.clickListener)}},{key:"getDist",value:function(t){return void 0!==m.x?v(t,this):1/0}},{key:"getVectorTo",value:function(t){return 0===(i=v(e=t,r=this))?{x:0,y:0}:{x:(r.x-e.x)/i,y:(r.y-e.y)/i};var e,r,i}}]),t}());function h(t,e,r,i,n){return i+(n-i)/(r-e)*((t=(t=(t=void 0===t?r:t)>r?r:t)<e?e:t)-e)}function v(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{x:0,y:0};return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}m.init();var p=function(){function t(){var e=this;f(this,t),this.cnv=null,this.ctx=null,this.size={w:0,h:0,cx:0,cy:0},this.lastFrameTime=0,this.currentFrameTime=0,this.fps=60,this.fpsHistory=[],this.zoom_center=[0,0],this.target_zoom_center=[0,0],this.zoom_size=4,this.stop_zooming=!0,this.zoom_factor=1,this.max_iterations=500,this.proj=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],this.xmin=-2,this.xmax=1,this.ymin=-1.5,this.ymax=1.5,this.zoom=!0,this.zoomInterval=void 0,this.interval=50,this.psize=5,this.startTime=0,this.time=0,this.texture=null,this.uvmouse={x:0,y:0},this.lastmousepos={x:0,y:0},this.mouseintensity=0,this.u_MVP=null,this.u_lBounds=null,this.u_time=null,this.u_Size=null,this.u_Sampler=null,this.u_Mouse=null,this.u_MouseInt=null,this.u_asp=null,this.onmousedown=function(t){t.preventDefault(),0===t.button&&(e.zoom=!0),2===t.button&&(e.zoom=!1),e.zoomInterval||(e.zoomInterval=setInterval(e.onZooming,e.interval))},this.onZooming=function(){var t=1,r=Math.max(e.currentFrameTime,e.interval)/1e3;!0===e.zoom&&(t-=r),!1===e.zoom&&(t+=r);var i=h(m.x,0,e.size.w,e.xmin,e.xmax)*(1-t),n=h(m.y,0,e.size.h,e.ymax,e.ymin)*(1-t);e.xmin=i+e.xmin*t,e.xmax=i+e.xmax*t,e.ymin=n+e.ymin*t,e.ymax=n+e.ymax*t},this.clearZoom=function(t){clearInterval(e.zoomInterval),e.zoomInterval=void 0},this.oncontextmenu=function(t){t.preventDefault()}}return c(t,[{key:"init",value:function(){this.createCanvas(),this.updateAnimation()}},{key:"calculateMVP",value:function(){this.size.w,this.size.h,this.proj=[2,0,0,-1,0,-2,0,1,0,0,2,-1,0,0,0,1]}},{key:"createCanvas",value:function(){var t=this;this.cnv=document.createElement("canvas"),document.body.appendChild(this.cnv),this.cnv.id="canvas";var e=this.ctx=this.cnv.getContext("webgl2"),r=e.createShader(e.VERTEX_SHADER),i=e.createShader(e.FRAGMENT_SHADER),o=e.shaderSource(r,n()),a=e.shaderSource(i,s());e.compileShader(r,o),e.getShaderParameter(r,e.COMPILE_STATUS)||(alert("Error compiling vertex shader"),console.log(e.getShaderInfoLog(r))),e.compileShader(i,a),e.getShaderParameter(i,e.COMPILE_STATUS)||(alert("Error compiling fragment shader"),console.log(e.getShaderInfoLog(i)));var u=e.createProgram();if(e.attachShader(u,r),e.attachShader(u,i),e.linkProgram(u),e.validateProgram(u),e.getProgramParameter(u,e.VALIDATE_STATUS)){e.useProgram(u);var f=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,f),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,1,1,-1,1]),e.STATIC_DRAW);var l=e.createBuffer();e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,l),e.bufferData(e.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,2,3,0]),e.STATIC_DRAW);var c=e.getAttribLocation(u,"aPos");e.enableVertexAttribArray(c),e.vertexAttribPointer(c,2,e.FLOAT,!1,0,0),this.u_MVP=e.getUniformLocation(u,"u_MVP"),this.u_lBounds=e.getUniformLocation(u,"u_bounds"),this.u_time=e.getUniformLocation(u,"u_time"),this.u_Size=e.getUniformLocation(u,"u_Size"),this.u_Sampler=e.getUniformLocation(u,"u_Sampler"),this.u_Mouse=e.getUniformLocation(u,"u_Mouse"),this.u_MouseInt=e.getUniformLocation(u,"u_MouseInt"),this.u_asp=e.getUniformLocation(u,"u_asp"),this.setCanvasSize(),window.addEventListener("resize",(function(){t.setCanvasSize()})),this.startTime=Date.now(),this.texture=function(t,e){var r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r);var i=t.RGBA,n=t.RGBA,o=t.UNSIGNED_BYTE,s=new Uint8Array([0,0,255,255]);t.texImage2D(t.TEXTURE_2D,0,i,1,1,0,n,o,s);var a=new Image;return a.onload=function(){t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,i,n,o,a),t.generateMipmap(t.TEXTURE_2D),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR)},a.src="img/bg1.jpg",r}(e),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,this.texture)}else console.log("Error validating program ",e.getProgramInfoLog(u))}},{key:"setCanvasSize",value:function(){this.size.w=this.cnv.width=window.innerWidth,this.size.h=this.cnv.height=window.innerHeight,this.size.cx=this.size.w/2,this.size.cy=this.size.h/2,this.ctx.viewport(0,0,this.size.w,this.size.h)}},{key:"getMouse",value:function(){var t=m.x,e=m.y;if(isFinite(t)&&isFinite(e)){this.uvmouse={x:h(t,0,this.size.w,0,1),y:h(e,0,this.size.h,0,1)};var r=t-this.lastmousepos.x,i=e-this.lastmousepos.y,n=r*r+i*i;if(this.lastmousepos=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},{x:t,y:e}),n>0)return console.log(Math.floor(n)),this.mouseintensity-=h(n,0,2e3,0,.1),void(this.mouseintensity=this.mouseintensity<0?0:this.mouseintensity)}this.mouseintensity+=.01,this.mouseintensity=this.mouseintensity>1?1:this.mouseintensity}},{key:"updateCanvas",value:function(){var t=this.ctx;this.time=(Date.now()-this.startTime)/1e3,this.calculateMVP(),t.uniformMatrix4fv(this.u_MVP,!1,this.proj),t.uniform4f(this.u_lBounds,this.xmin,this.xmax,this.ymin,this.ymax),t.uniform1f(this.u_time,this.time),t.uniform1f(this.u_Size,this.psize),this.getMouse(),t.uniform2f(this.u_Mouse,this.uvmouse.x,this.uvmouse.y),t.uniform1f(this.u_MouseInt,this.mouseintensity),t.uniform1f(this.u_asp,this.size.w/this.size.h),t.uniform1i(this.u_Sampler,0),t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0)}},{key:"calculateFps",value:function(){if(0==this.lastFrameTime)this.lastFrameTime=this.time;else if(this.currentFrameTime=this.time-this.lastFrameTime,this.fpsHistory.push(1/this.currentFrameTime),this.lastFrameTime=this.time,this.fpsHistory.length>20){var t=this.fpsHistory.reduce((function(t,e){return t+e}),0)/this.fpsHistory.length||0;this.fps=t,this.fpsHistory=[]}}},{key:"updateAnimation",value:function(){var t=this;this.updateCanvas(),this.calculateFps(),window.requestAnimationFrame((function(){t.updateAnimation()}))}}]),t}();window.onload=function(){(new p).init()}},307:(t,e,r)=>{"use strict";r.r(e)},335:t=>{t.exports="#version 300 es\r\n\r\nprecision highp float;\r\n#define MAX_ITERATIONS 255.0\r\n#define S(a, b, t) smoothstep(a, b, t)\r\n\r\nout vec4 FragColor;\r\nin vec2 uv;\r\nin vec2 mouse;\r\n\r\nuniform vec4 u_bounds;\r\nuniform float u_time;\r\nuniform float u_Size;\r\nuniform sampler2D u_Sampler;\r\nuniform float u_MouseInt;\r\nuniform float u_asp;\r\n\r\nfloat map(float value, float min1, float max1, float min2, float max2) {\r\n    return min2 + (value - min1) * (max2 - min2) / (max1 - min1);\r\n}\r\n\r\nfloat N21(vec2 p) {\r\n  p = fract(p * vec2(123.34f, 345.45f));      \r\n  p += dot(p, p + 34.345f);\r\n  return fract(p.x * p.y);      \r\n}\r\n\r\nvec3 Layer(vec2 UV, float t) {\r\n  \r\n  vec2 asp = vec2(2.0f, 1.0f); // y: 2, x: 1\r\n  vec2 uv1 = UV * u_Size * asp * vec2(u_asp, 1.0f);\r\n  uv1.y = -uv1.y;\r\n  uv1.y += t * .25f;\r\n  vec2 gv = fract(uv1) - .5f;\r\n  vec2 id = floor(uv1);\r\n\r\n  float n = N21(id);\r\n  t += n * 6.2831;\r\n  \r\n  float w = UV.y * 10.0f;\r\n  float x = (n - 0.5f) * .8f;\r\n  x += (.4f - abs(x)) * sin(3.0f * w) * pow(sin(w), 6.0f) * .45f;\r\n\r\n  float y = -sin(t + sin(t + sin(t) * .5f)) * .45f;\r\n  y -= (gv.x - x) * (gv.x - x);\r\n\r\n  vec2 dropPos = (gv - vec2(x, y)) / asp;\r\n  float drop = S(.035f, .025f, length(dropPos));\r\n\r\n  vec2 trailPos = (gv - vec2(x, t * .25f)) / asp;\r\n  trailPos.y = (fract(trailPos.y * 32.0f) - 0.5f) / 32.0f;\r\n  float trail = S(.03f, .001f, length(trailPos)) * .8f;\r\n  float fogTrail = S(-.1f, .1f, dropPos.y);\r\n  fogTrail *= S(.5f, y, gv.y);\r\n  trail *= fogTrail;\r\n  fogTrail *= S(0.03f, 0.02f, abs(dropPos.x));\r\n\r\n  vec2 offs = drop * dropPos * .6 + trail * trailPos * .4;\r\n\r\n  return vec3(offs, fogTrail);\r\n\r\n  // return vec3(trail, offs.y, fogTrail);\r\n}\r\n\r\nvoid main()\r\n{\r\n  float Pi = 6.28318530718;\r\n  vec2 asp = vec2(u_asp, 1.0f);\r\n\r\n  float imgasp = u_asp / 1.4f; // image aspect ratio\r\n  vec2 sampleuv;\r\n  if (imgasp > 1.0f) { \r\n    sampleuv = (uv - vec2(0.5f)) * vec2(1.0f, 1.0f / imgasp) + vec2(0.5f);\r\n  } else {\r\n    sampleuv = (uv - vec2(0.5f)) * vec2(imgasp, 1.0f) + vec2(0.5f);\r\n  }\r\n\r\n  vec2 uv1 = uv * asp;\r\n\r\n  FragColor = vec4(0.0f);\r\n  // cycle time to avoid precision drop\r\n  float t = mod(u_time, 72000.0f);\r\n\r\n  vec3 drops = Layer(uv1, t);\r\n  drops += Layer(uv1 * 1.73f + 1.75f, t + 1.87);\r\n  drops += Layer(uv1 * 1.13f + 7.03f, t + 3.31);\r\n\r\n  float blur = (1.0f - drops.z);\r\n  \r\n  float Directions = 8.0;\r\n  float Quality = 4.0; \r\n  float Size = 2.0;\r\n  vec2 Radius = vec2(.02f);\r\n\r\n  vec2 uvoff = sampleuv + drops.xy;\r\n  vec4 Color = texture(u_Sampler, sampleuv, 4.0f);\r\n\r\n  for(float d = 0.0; d < Pi; d += Pi/Directions) {\r\n    for(float i = 1.0 / Quality; i <= 1.0; i += 1.0 / Quality) {\r\n      Color += texture(u_Sampler, sampleuv + vec2(cos(d), sin(d)) * Radius * i, 4.0f);\t\t\r\n    }\r\n  }\r\n\r\n  float mouseCircle = S(0.3f, 0.1f, length((mouse - uv) * asp)) * u_MouseInt;\r\n  blur *= (1.0f - mouseCircle);\r\n\r\n  Color /= Quality * Directions;\r\n  vec4 BaseColor = texture(u_Sampler, uvoff);\r\n  FragColor = mix(BaseColor, Color, blur) * 0.7f;\r\n\r\n  // vec4 Color = texture(u_Sampler, sampleuv);\r\n  // FragColor = Color;\r\n  // FragColor = vec4(1.0f) * mouseCircle;\r\n  // FragColor = vec4(sampleuv, 0.0f, 1.0f);\r\n}"},676:t=>{t.exports="#version 300 es\r\n\r\nprecision highp float;\r\nlayout(location = 0) in vec2 aPos;\r\n\r\nout vec2 uv;\r\nout vec2 mouse;\r\n\r\nuniform mat4 u_MVP;\r\nuniform vec2 u_Mouse;\r\n\r\nvoid main() {\r\n  gl_Position = vec4(aPos, .0f, 1.0f);\r\n  vec4 uv_out =  gl_Position * inverse(u_MVP);\r\n  uv = uv_out.xy;\r\n  // mouse = (inverse(u_MVP) * vec4(u_Mouse, .0f, 1.0f)).xy;\r\n  mouse = u_Mouse.xy;\r\n}"}},e={};function r(i){var n=e[i];if(void 0!==n)return n.exports;var o=e[i]={exports:{}};return t[i](o,o.exports,r),o.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var i in e)r.o(e,i)&&!r.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r(307),r(187)})();
//# sourceMappingURL=bundle.js.map